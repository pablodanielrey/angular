<div class="showAssistance">

  <!-- seleccion de usuario -->
  <div class="title">
    <label><i class="fa fa-clock-o"></i> Control de Horario</label>
  </div>
  <div class="content">
    <div class="contentLeft">
      <div class="navTitleUser">Usuario</div>

      <input class="navTitleUser2" type="text" ng-model="model.searchUser" >

      <div class="searchList">
        <div class="navSearchList">Seleccione</div>
        <div clasS='listUsersContent'>

          <div class="listUsers" ng-repeat="user in model.usersFilters | filter:model.searchUser | orderBy:['name','lastname']" ng-click="selectUser(user)" ng-class="{true:'selected'}[isSelectedUser(user)]">{{user.name}} {{user.lastname}}</div>
        </div>
        <div class="cleanse" ng-class="{false:'enabled',true:'disabled'}[model.usersIdSelected.length == 0]">
          <span ng-click="clearUsersSelected()" ><i class="fa fa-eraser"></i> Borrar Selecci√≥n</span>
        </div>
      </div>
    </div>
    <div class="contentRight">
      <div class="nav">
        <div>
          <div class="navTitle"><i class="fa fa-building-o"></i> Oficina</div>
          <select class="navTitle1" ng-change="filterUsers()" ng-model="model.groupSelected"  ng-options="op.name for op in model.groups | orderBy:['name']">
            <option value="">Todos</option>
          </select>
       </div>
        <div>
          <div class="navTitle">Fecha Inicio</div>
          <input class="navTitle2" type="date" ng-model="model.start" ng-blur="checkDates()" >
        </div>
        <div>
          <div class="navTitle">Fecha Fin</div>
          <input class="navTitle2" type="date" ng-model="model.end" ng-blur="checkDates()">
        </div>


        <div>
          <button class="searchButtom" ng-click="searchAssistance()" ng-class="{false:'enabled',true:'disabled'}[isDisabled()]" ng-disabled="isDisabled()"><i class="fa fa-search"></i> Buscar</button>
          <span class="searchDate" ng-if='isDisabled()'><i class="loading fa fa-spinner fa-spin"></i>  Buscando Datos</span>
        </div>


      </div>

      <div class="nav2">
        <div ng-click="reverseDate=!reverseDate;order(['dateSort'],reverseDate)"  class="tam0T"><i class="fa fa-calendar-o"></i> Fecha</div>
        <div ng-click="reverseUser=!reverseUser;order(['user','dateSort'],reverseUser)" class="tam2T"><i class="fa fa-user"></i> Usuario</div>
        <div ng-click="reverseStart=!reverseStart;order(['start','dateSort'],reverseStart)" Class="tam1T"> Entrada</div>
        <div ng-click="reverseEnd=!reverseEnd;order(['end','dateSort'],reverseEnd)" class="tam3T"> Salida</div>
        <div ng-click="reverseWT=!reverseWT;order(['workedTime','dateSort'],reverseWT)" class="tam1T"> Total</div>
        <div class="tam3" ng-click="reverseObs=!reverseObs;order(['justification','dateSort'],reverseObs)"><i class="fa fa-exclamation"></i> Observaciones</div>
      </div>
      <div class='dataUsersContent'>
        <div class="results" ng-repeat="assistance in model.assistances">
          <div class="tam1">{{assistance.date}}</div>
          <div class="tam2 textBlue">{{assistance.user}}</div>
          <div class="tam4">{{assistance.start}}</div>
          <div class="tam4">{{assistance.end}}</div>
          <div class="tam4">{{assistance.workedTime}}</div>
          <div class="tam3">
            <div class="obs"  ng-class="{true:'visible',false:'hidden'}[!assistance.displayLogs]">
              <span ng-click="showLogs(true,assistance)" class="link"> <i class="fa fa-plus-circle"></i></span>
            </div>

            <!-- MARCACIONES -->
            <div class="logs obs" ng-class="{true:'visible',false:'hidden'}[assistance.displayLogs]">
              <span ng-click="showLogs(false,assistance)" class="link"><i class="fa fa-minus-circle"></i></span>
              <ul class="ULlogs">
                <div ng-repeat="log in assistance.logs">
                  <li><i class="fa fa-calendar-o"></i> {{log.date}}</li>
                  <li><i class="fa fa-clock-o"></i> {{log.time}}</li>
                </div>
              </ul>
            </div>


            <!-- JUSTIFICATIONES -->

            <div ng-class="{true:'visible',false:'hidden'}[(assistance.justification != undefined) && (assistance.justification.justification_id != undefined) && (assistance.justification.justification_id != 'fa64fdbd-31b0-42ab-af83-818b3cbecf46')]">
              <span class="obs"> <i class="fa fa-ticket"></i>{{assistance.justification.name}}</span>
            </div>

            <div ng-class="{true:'visible',false:'hidden'}[assistance.justification.justification_id == 'fa64fdbd-31b0-42ab-af83-818b3cbecf46']">
              <span class="obs" ng-click="showJustifications(assistance)"> <i class="fa fa-ticket"></i> Boleta de salida</span>
              <ul class="ULlogs" ng-class="{true:'visible',false:'hidden'}[assistance.displayJustification]">
                <li><i class="fa fa-calendar-o"></i> Desde {{assistance.justification.startTime}}</li>
                <li><i class="fa fa-calendar-o"></i> Hasta {{assistance.justification.endTime}}</li>
              </ul>
            </div>

          </div>
        </div>
      </div>

      <div class="saveContent">
        <button class='save' ng-click='download()' ng-if='model.download'><i class="fa fa-download"></i>&nbsp;  Descargar Datos</button>
      </div>


    </div>
  </div>



</div>
