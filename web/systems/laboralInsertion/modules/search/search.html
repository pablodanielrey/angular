<div class="search" ng-class='getCurrentScreen()'>
<!-- <div class="search  "> -->
  <!-- Variables 1: screenBussines, screenFilters, screenSelected
       Variables2: screenSelectBusiness, screenSendBusiness, screenSending, screenSent-->

  <div class="header">

    <div>
      <button class="btnFilters" type="button" name="filters" ng-click='selectFilters()'><i class="fa fa-sliders "></i> <b>Filtros</b> </button>
    </div>

    <div ng-if="!model.searching">
      <button class="btnSend" type="button" name="button" ng-click='search()'><i class="fa fa-search"></i> <b> Buscar </b></button>
    </div>
    <div class="searching" ng-if="model.searching">
      <span  ng-if='model.searching'><i class="loading fa fa-spinner fa-spin"></i>  Buscando Datos</span>
    </div>

    <div>
      <button class="btnSend" type="button" name="button" ng-click='viewSelected()'>  <b>{{model.selecteds.length}}</b>&nbsp; <i class="fa fa-users"></i>&nbsp; Seleccionados</button>
    </div>

    <!-- <div class="btnUserSelect">
      <i class="fa fa-users"></i> <b>{{model.selecteds.length}}</b> Inscripciones Seleccionadas
    </div> -->



  </div>

  <div class="searchContainer">
      <div class="titles">
        <table>
          <thead>
            <tr class="fileTitles">
              <th>
                <div class="Select">
                  <input type="checkbox" ng-click='selectAllInscriptions()'>
                </div>
              </th>
              <th>
                <div class="dates" ng-click="view.reverseSent=!view.reverseSent;orderSents(view.reverseSent)">
                  <i class="fa fa-bookmark"></i>
                </div>
              </th>
              <th>
                <div class="user">
                  <i class="fa fa-user"></i>
                </div>
              </th>
              <th>
                <div class="registration" ng-click="view.reverseRegistration=!view.reverseRegistration;orderRegistration(view.reverseRegistration)">
                  Inscripto
                </div>
              </th>
              <th>
                <div class="name" ng-click="view.reverseName=!view.reverseName;orderUser(view.reverseName)">
                  Postulante
                </div>
              </th>
              <th>
                <div class="sex" ng-click="view.reverseGenre=!view.reverseGenre;orderGenre(view.reverseGenre)">
                  Sexo
                </div>
              </th>
              <th>
                <div class="age" ng-click="view.reverseAge=!view.reverseAge;orderAge(view.reverseAge)">
                  Edad
                </div>
              </th>
              <th>
                <div class="dni" ng-click="view.reverseDni=!view.reverseDni;orderDni(view.reverseDni)">
                  DNI
                </div>
              </th>
              <th>
                <div class="city" ng-click="view.reverseCity=!view.reverseCity;orderCity(view.reverseCity)">
                  C. de Origen
                </div>
              </th>
              <th>
                <div class="city2" ng-click="view.reverseResidence=!view.reverseResidence;orderResidence(view.reverseResidence)">
                  C. de Residencia
                </div>
              </th>
              <th>
                <div class="travel" ng-click="view.reverseTravel=!view.reverseTravel;orderTravel(view.reverseTravel)">
                  Viajar
                </div>
              </th>
              <th>
                <div class="workExperience" title="Experiencía Laboral" ng-click="view.reverseWorkExperience=!view.reverseWorkExperience;orderWorkExperience(view.reverseWorkExperience)">
                  Exp. L.
                </div>
              </th>
              <th>
                <div class="english" ng-click="view.reverseEnglish=!view.reverseEnglish;orderEnglish(view.reverseEnglish)">
                  Inglés
                </div>
              </th>

              <th>
                <div class="other" title="Otro Idioma" ng-click="view.reverseLanguagesOther=!view.reverseLanguagesOther;orderLanguagesOther(view.reverseLanguagesOther)">
                  Otro I.
                </div>
              </th>
              <th>
                <div class="career" title="Carrera" ng-click="view.reverseDegree=!view.reverseDegree;orderDegree(view.reverseDegree)">
                  Carrera
                </div>
              </th>
              <th>
                <div class="cousers" title="Cantidad de Materias" ng-click="view.reverseApproved=!view.reverseApproved;orderApproved(view.reverseApproved)">
                  C. M.
                </div>
              </th>
              <th>
                <div class="average" title="Promedio c/aplazos" ng-click="view.reverseAverage1=!view.reverseAverage1;orderAverage1(view.reverseAverage1)">
                  %
                </div>
              </th>
              <th>
                <div class="average2" title="Promedio" ng-click="view.reverseAverage2=!view.reverseAverage2;orderAverage2(view.reverseAverage2)">
                  % c/a
                </div>
              </th>
              <th>
                <div class="program" ng-click="view.reverseWorkType=!view.reverseWorkType;orderWorkType(view.reverseWorkType)">
                    Oferta
                </div>
              </th>
              <th>
                <div class="mail" ng-click="view.reverseMail=!view.reverseMail;orderMail(view.reverseMail)">
                  Correo
                </div>
              </th>
            </tr>
          </thead>
        <table>

      </div>

      <!-- <div class="searchResults" ng-class="{true:'seleccionado'}[isSelected(i.userId)]"> -->
      <div class="searchResults" ng-class="{true:'seleccionado'}[isSelected(i.id)]">
        <table ng-repeat='i in model.inscriptions' ng-class="{true:'seleccionado'}[isSelected(i)]">
          <tr class="fileResults" >
            <td>
              <div class="Select" ng-if="getMail(i.userId) != 'No Definido' && i.checked">
                <input type="checkbox" ng-checked='isSelected(i)' ng-click='selectInscription(i)'>
              </div>
              <div class="Select" ng-if="getMail(i.userId) == 'No Definido' || !i.checked">
                -
              </div>
            </td>
            <td>
              <div class="dates">
                {{getSents(i.id)}}
              </div>
            </td>
            <td>
              <div class="user" ng-click="displayProfile(i)">
                <i class="fa fa-user"></i>
              </div>
            </td>
            <td>
              <div class="registration">
                {{getDate(i.created)}}
              </div>
            </td>
            <td>
              <div class="name">
                {{getName(i.userId)}}
              </div>
            </td>
            <td>
              <div class="sex">
                {{getGenre(i.userId)}}
              </div>
            </td>
            <td>
              <div class="age">
                {{getAge(i.userId)}}
              </div>
            </td>
            <td>
              <div class="dni">
                {{getDni(i.userId)}}
              </div>
            </td>
            <td>
              <div class="city">
                {{getCity(i.userId)}}
              </div>
            </td>
            <td>
              <div class="city2">
              {{getResidence(i.userId)}}
              </div>
            </td>
            <td>
              <div class="travel">
                {{getTravel(i)}}
              </div>
            </td>
            <td>
              <div class="workExperience">
                {{getWorkExperience(i)}}
              </div>
            </td>
            <td>
              <div class="english">
                {{getEnglish(i.userId)}}
              </div>
            </td>
            <td>
              <div class="other">
                {{getLanguagesOther(i.userId)}}
              </div>
            </td>
            <td>
              <div class="career" title="Carrera">
                {{i.degree}}
              </div>
            </td>
            <td>
              <div class="cousers" title="Cantidad de Materias">
                {{i.approved}}
              </div>
            </td>
            <td>
              <div class="average" title="Promedio c/aplazos">
                {{i.average1}}
              </div>
            </td>
            <td>
              <div class="average2" title="Promedio">
                {{i.average2}}
              </div>
            </td>
            <td>
              <div class="program">
                <div ng-if="i.workType == 'Programa estudiantes avanzados y jovenes profesionales'">
                  Programa EA y JP
                </div>
                <div ng-if="i.workType != 'Programa estudiantes avanzados y jovenes profesionales'">
                  {{i.workType}}
                </div>
              </div>
            </td>
            <td>
              <div class="mail">
                {{getMail(i.userId)}}
              </div>
            </td>
          </tr>
        </table>

      </div>

  </div>

  <div class="selected">
      <div class="contentSeleted">

          <div class="headerSeleted">

            <div>
              <button class="btnFilters" type="button" name="backSeachr" ng-click='selectInscriptions()'><i class="fa fa-arrow-left"></i> <b>Volver</b> </button>
            </div>

            <div class="btnUserSelect">
              <i class="fa fa-users"></i> <b>{{model.selecteds.length}}</b> Inscripciones Seleccionadas
            </div>

            <div>
              <button class="btnSend" type="button" name="button" ng-click='selectCompany()'><i class="fa fa-angle-double-right"></i> <b> Enviar seleccionados a </b></button>
            </div>

          </div>

          <div class="searchContainerSelected">
              <div class="titles">
                <table>
                  <tr class="fileTitles">

                    <td>
                      <div class="age">
                        Nº
                      </div>
                    </td>

                    <td>
                      <div class="name">
                        Postulante
                      </div>
                    </td>
                    <td>
                      <div class="dni">
                        DNI
                      </div>
                    </td>
                    <td>
                      <div class="age">
                        Edad
                      </div>
                    </td>
                    <td>
                      <div class="career" title="Carrera">
                        Carrera
                      </div>
                    </td>
                    <td>
                      <div class="program">
                          Oferta
                      </div>
                    </td>
                    <td>
                      <div class="program">
                          Acción
                      </div>
                    </td>
                  </tr>
                </table>

              </div>

              <!-- <div class="searchResults" ng-class="{true:'seleccionado'}[isSelected(i.userId)]"> -->
              <div class="searchResults" ng-class="{true:'seleccionado'}[isSelected(i.id)]">
                <table ng-repeat='i in model.selecteds'>
                  <tr class="fileResults">

                    <td>
                      <div class="age">
                        {{$index + 1}}
                      </div>
                    </td>

                    <td>
                      <div class="name">
                        <b>{{getName(i.userId)}}</b>
                      </div>
                    </td>

                    <td>
                      <div class="dni">
                        {{getDni(i.userId)}}
                      </div>
                    </td>

                    <td>
                      <div class="age">
                        {{getAge(i.userId)}}
                      </div>
                    </td>

                    <td>
                      <div class="career" title="Carrera">
                        {{i.degree}}
                      </div>
                    </td>

                    <td>
                      <div class="program">
                        {{i.workType}}
                      </div>
                    </td>

                    <td>
                      <div class="program">
                          <button class="btnDeleteInsciption" ng-click="deleteSelected(i)"><i class="fa fa-trash-o"></i> Borrar</button>
                      </div>
                    </td>

                  </tr>
                </table>

              </div>

          </div>


      </div>
  </div>

  <div class="business">

     <div class="contentBusines">
         <div class="businessList">
              <div class="textTitlesBusines">
                <div>
                  <i class="fa fa-building-o"></i> <b>Seleccione empresa</b>
                </div>
                <div>
                  <button class="btnBack" type="button" name="Volver" ng-click="viewSelected()"> Volver</button>
                </div>
              </div>
              <div class="contentBusinesList">

                  <div class="infoBussines" ng-repeat='c in model.companies' ng-click='confirmMailToCompany(c)'>
                    <!--
                      <div>
                          <img src="{{c.url}}" width="100px" height="34px">
                      </div>
                    -->
                      <div class="textBussines">
                        <b>{{c.name}}</b> <br>
                        La Plata
                      </div>
                  </div>

              </div>
         </div>
     </div>

     <div class="sendBusines">
          <div class="contentSendBusines">

              <div class="textTitlesBusines">
                 <b>Enviar las personas seleccionadas a</b>
                 <div>
                   <button class="btnBack" type="button" name="Volver" ng-click='selectCompany()'> Volver</button>
                 </div>
              </div>

              <div class="infoBussines2" ng-if='model.company != null'>

                  <div class="contentInfoBussines">
                      <div>
                          <img src="{{model.company.url}}" width="100px" height="34px">
                      </div>
                      <div class="textBussines">
                        <b>{{model.company.name}}</b> <br>
                        La Plata
                      </div>
                  </div>
                  <div class="textsendList">
                  Enviar listado de postulantes a:
                  </div>
                  <div class="contentMailBusines">
                      <div class="mailBussines" ng-repeat='e in model.company.emails'>
                        <div><i class="fa fa-envelope-o"></i> {{e}}<button class="btnDeleteMail" ng-click='removeEmailFromCompany(e)'> <i class="fa fa-trash-o"></i></button></div>
                      </div>
                  </div>
                  <div class="addMail">
                    <i class="fa fa-envelope-o"></i>
                    <input class="inputMail" type=email ng-model='model.emailAddToCompany' placeholder="Nuevo Correo"></input>
                    <button class="btnAddMail" ng-click='addEmailToCompany()'> <i class="fa fa-plus"></i> Agregar</button>
                  </div>

              </div>

              <div>
                  <button class="btnSend2" type="button" name="button" ng-click='sendMailToCompany()'><i class="fa fa-angle-double-right"></i> <b> Enviar  </b></button>
              </div>

          </div>

     </div>

     <div class="sending">
          <div class="contentSending">
               <div>
                 <i class="fa fa-spinner fa-2x fa-pulse"></i>
               </div>
               <div>
                 &nbsp;  Enviando...
               </div>
          </div>
     </div>

     <div class="sent">
          <div class="contentSent">
            <div class="textTitlesBusines">
              <div>
                <i class="fa fa-check-circle"></i> <b>Envio finalizado!</b>
              </div>
              <div>
                <button class="btnBack" type="button" name="Salir" ng-click='selectInscriptions()'> Salir</button>
              </div>
            </div>

            <div class="contentMail">
              <i class="fa fa-envelope-o"></i> Correos electrónicos de los postulantes
                <div class="listMail">
                  <div ng-repeat='e in model.emails'>{{e}}</div>
                </div>
            </div>

          </div>
     </div>

  </div>

  <div class="filters" ng-controller="FiltersCtrl" ng-include="'/systems/laboralInsertion/modules/search/filters.html'">
  </div>

  <div class="profile" ng-controller="ProfilesCtrl" ng-include="'/systems/laboralInsertion/modules/search/profileUser.html'">
  </div>

</div>
